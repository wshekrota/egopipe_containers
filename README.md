## Building containers to run testing for egopipe application

### For each application

---
* cd to app directory
* docker build . 
---

### Copies necessary files in place and starts app

These containers are a test env for me, my test application uses a vm to run gitlab and the filebeat 
shipper. To establish a network connection from that vm to the logstash container listening the following 
route is needed.

#### route add -net 172.17.0.0 netmask 255.255.0.0 gw 192.168.1.45

Where 172.17 networks are defaulted for containers. 
In my case I started them in order elastic/logstash/kibana so I would know the ips are 0.2 and 0.3 
respectively. You'll know quick enough when you try the api interface. If there are problems do a 
'docker inspect' on the container.

and 192.168.1.45 is my laptop

If you are using gitlab as an application you also have the option of installing it directly on your 
laptop being in the same network you will not require special routing.
I

### Topography

Logs are generated by gitlab and in your filebeat.yml you can define which logs to ship. If everything is 
up and you are not getting any input be suspicious of the route table. You may run a different application 
or program to generate messages  but the logic will be similar combination. application/shipper

Gitlab/Filebeat(vm) -> logstash/egopipe(container) -> Elasticsearch(container) <- Kibana(container)

### Disclaimer

In a production sense you would not do something like this, rolling the config in the container image static.
You would build a stateful kubernetes and apply config file changes thus not having to reimage.
